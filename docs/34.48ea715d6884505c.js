"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[34],{1034:(A,h,a)=>{a.r(h),a.d(h,{TeamsModule:()=>z});var u=a(6814),g=a(4840),c=a(95);class _{}var e=a(4946),d=a(5219),T=a(5439),m=a(8031),C=a(8443),v=a(4104),x=a(4532),Z=a(3714),b=a(2160),f=a(707);function S(i,n){1&i&&e._uU(0," Cadastre seu time ")}function L(i,n){1&i&&e._uU(0," Cadastre seu time, informando se ele ser\xe1 um time do modo ultimate ou clubs ")}function F(i,n){if(1&i){const s=e.EpF();e.TgZ(0,"form",5),e.NdJ("ngSubmit",function(){e.CHM(s);const o=e.oxw();return e.KtG(o.onSubmit())}),e.TgZ(1,"div",6)(2,"h5"),e._uU(3,"Cadastre seu time e modo de jogo"),e.qZA(),e.TgZ(4,"div",7)(5,"div",8)(6,"label",9),e._uU(7,"Nome do time"),e.qZA(),e._UZ(8,"input",10),e.qZA(),e.TgZ(9,"div",8)(10,"label",11),e._uU(11,"Modo de jogo"),e.qZA(),e._UZ(12,"p-dropdown",12),e.qZA(),e.TgZ(13,"div",13),e._UZ(14,"button",14),e.qZA()()()()}if(2&i){const s=e.oxw();e.Q6J("formGroup",s.teamForm),e.xp6(12),e.Q6J("autoDisplayFirst",!1)("options",s.modes),e.xp6(2),e.Q6J("disabled",s.teamForm.invalid)}}let J=(()=>{var i;class n{constructor(t,o,l,r,V){this.messageService=t,this.modeService=o,this.fb=l,this.authService=r,this.teamService=V,this.teamForm=this.fb.group({name:["",c.kI.required],mode:["",[c.kI.required]]})}ngOnInit(){this.loadModes(),this.loadLoggedInUser()}ngOnDestroy(){this.myUser&&this.myUser.unsubscribe(),this.myModes&&this.myModes.unsubscribe()}loadModes(){this.myModes=this.modeService.getAll().subscribe(t=>{this.modes=t})}loadLoggedInUser(){this.myUser=this.authService.getUser().subscribe(t=>{this.loggedInUser=t})}onSubmit(){const t=new _;t.team=this.teamForm.get("name").value,t.mode_id=this.teamForm.get("mode").value.id,t.check=!0,this.loggedInUser&&(t.user_id=this.loggedInUser.profile_id),this.teamService.save(t).subscribe({next:o=>{this.teamForm.reset(),this.messageService.add({severity:"success",summary:"Successful",detail:`Time ${o.team} cadastrado, agora pe\xe7a a confirma\xe7\xe3o para o administrador para come\xe7ar a jogar!`,life:3e3})},error:o=>{console.error("Erro ao cadastrar:",o),this.messageService.add({severity:"error",summary:"Falhou!",detail:`Erro! ${o.error.error}`,life:3e3})}})}}return(i=n).\u0275fac=function(t){return new(t||i)(e.Y36(d.ez),e.Y36(T.d),e.Y36(c.qu),e.Y36(m.u),e.Y36(C.U))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-teams-form"]],decls:7,vars:0,consts:[[1,"card"],[1,"stepsdemo-content"],["pTemplate","title"],["pTemplate","subtitle"],["pTemplate","content"],[3,"formGroup","ngSubmit"],[1,"card","p-fluid"],[1,"p-formgrid","grid"],[1,"field","col"],["htmlFor","name"],["pInputText","","formControlName","name","id","name","type","text"],["for","dropdown"],["inputId","mode","formControlName","mode","optionLabel","name",3,"autoDisplayFirst","options"],[1,"field","col","mt-auto"],["pButton","","label","Cadastrar",1,"align-self-end",3,"disabled"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"p-toast"),e.TgZ(2,"div",1)(3,"p-card"),e.YNc(4,S,1,0,"ng-template",2),e.YNc(5,L,1,0,"ng-template",3),e.YNc(6,F,15,4,"ng-template",4),e.qZA()()())},dependencies:[c._Y,c.Fj,c.JJ,c.JL,v.FN,d.jx,x.Z,Z.o,b.Lt,c.sg,c.u,f.Hq]}),n})();var p=a(8027),M=a(6340),y=a(1312);function N(i,n){if(1&i){const s=e.EpF();e.TgZ(0,"div",17)(1,"button",18),e.NdJ("click",function(){e.CHM(s);const o=e.oxw();return e.KtG(o.deleteTeams())}),e.qZA()()}if(2&i){const s=e.oxw();e.xp6(1),e.Q6J("disabled",!s.selectedTeams||!s.selectedTeams.length)}}function D(i,n){if(1&i){const s=e.EpF();e.TgZ(0,"div",19)(1,"h5",20),e._uU(2,"Times cadastrados"),e.qZA(),e.TgZ(3,"span",21),e._UZ(4,"i",22),e.TgZ(5,"input",23),e.NdJ("input",function(o){e.CHM(s);const l=e.oxw(),r=e.MAs(7);return e.KtG(l.onGlobalFilter(r,o))}),e.qZA()()()}}function q(i,n){1&i&&(e.TgZ(0,"tr")(1,"th",24),e._UZ(2,"p-tableHeaderCheckbox"),e.qZA(),e.TgZ(3,"th",25),e._uU(4,"id "),e._UZ(5,"p-sortIcon",26),e.qZA(),e.TgZ(6,"th",27),e._uU(7,"Time "),e._UZ(8,"p-sortIcon",28),e.qZA(),e.TgZ(9,"th",29),e._uU(10,"Modo de Jogo "),e._UZ(11,"p-sortIcon",28),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Editar"),e.qZA(),e.TgZ(14,"th"),e._uU(15," Deletar "),e.qZA()())}function w(i,n){if(1&i){const s=e.EpF();e.TgZ(0,"tr")(1,"td"),e._UZ(2,"p-tableCheckbox",30),e.qZA(),e.TgZ(3,"td",31)(4,"span",32),e._uU(5,"Id"),e.qZA(),e._uU(6),e.qZA(),e.TgZ(7,"td",33)(8,"span",32),e._uU(9,"Name"),e.qZA(),e._uU(10),e.qZA(),e.TgZ(11,"td",34)(12,"span",32),e._uU(13,"Modo de jogo "),e.qZA(),e._uU(14),e.qZA(),e.TgZ(15,"td")(16,"div",35)(17,"button",36),e.NdJ("click",function(){const l=e.CHM(s).$implicit,r=e.oxw();return e.KtG(r.editTeam(l))}),e.qZA()()(),e.TgZ(18,"td")(19,"div",35)(20,"button",37),e.NdJ("click",function(){const l=e.CHM(s).$implicit,r=e.oxw();return e.KtG(r.deleteTeam(l))}),e.qZA()()()()}if(2&i){const s=n.$implicit;e.xp6(2),e.Q6J("value",s),e.xp6(4),e.hij(" ",s.id," "),e.xp6(4),e.hij(" ",s.team," "),e.xp6(4),e.hij(" ",s.mode.name," "),e.xp6(3),e.Q6J("disabled",s.check)}}function I(i,n){1&i&&(e.TgZ(0,"small",44),e._uU(1,"Preencha o nome."),e.qZA())}const k=function(i){return{"ng-invalid ng-dirty":i}};function E(i,n){if(1&i){const s=e.EpF();e.TgZ(0,"div",38)(1,"label",39),e._uU(2,"Nome"),e.qZA(),e.TgZ(3,"input",40),e.NdJ("ngModelChange",function(o){e.CHM(s);const l=e.oxw();return e.KtG(l.team.team=o)}),e.qZA(),e.YNc(4,I,2,0,"small",41),e.qZA(),e.TgZ(5,"div",38)(6,"label",42),e._uU(7,"Modo de jogo"),e.qZA(),e.TgZ(8,"p-dropdown",43),e.NdJ("ngModelChange",function(o){e.CHM(s);const l=e.oxw();return e.KtG(l.team.mode=o)}),e.qZA()()}if(2&i){const s=e.oxw();e.xp6(3),e.Q6J("ngModel",s.team.team)("ngClass",e.VKq(5,k,s.submitted&&!s.team.team)),e.xp6(1),e.Q6J("ngIf",s.submitted&&""==!s.team.team),e.xp6(4),e.Q6J("options",s.modes)("ngModel",s.team.mode)}}function Y(i,n){if(1&i){const s=e.EpF();e.TgZ(0,"button",45),e.NdJ("click",function(){e.CHM(s);const o=e.oxw();return e.KtG(o.hideDialog())}),e.qZA(),e.TgZ(1,"button",46),e.NdJ("click",function(){e.CHM(s);const o=e.oxw();return e.KtG(o.saveTeam())}),e.qZA()}if(2&i){const s=e.oxw();e.xp6(1),e.Q6J("disabled",!s.team.team)}}function $(i,n){if(1&i&&(e.TgZ(0,"span"),e._uU(1,"Tem certeza que quer excluir este time? "),e._UZ(2,"br"),e.TgZ(3,"b"),e._uU(4),e.qZA()()),2&i){const s=e.oxw();e.xp6(4),e.Oqu(s.team.team)}}function G(i,n){if(1&i){const s=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){e.CHM(s);const o=e.oxw();return e.KtG(o.deleteTeamDialog=!1)}),e.qZA(),e.TgZ(1,"button",48),e.NdJ("click",function(){e.CHM(s);const o=e.oxw();return e.KtG(o.confirmDelete())}),e.qZA()}}function H(i,n){if(1&i){const s=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){e.CHM(s);const o=e.oxw();return e.KtG(o.deleteTeamsDialog=!1)}),e.qZA(),e.TgZ(1,"button",48),e.NdJ("click",function(){e.CHM(s);const o=e.oxw();return e.KtG(o.deleteTeamsSelecteds())}),e.qZA()}}const K=function(){return["team","mode.name"]},j=function(){return[10,20,30]},Q=function(){return{width:"450px",height:"450px"}},U=function(){return{width:"450px"}},R=[{path:"create",component:J},{path:"myList",component:(()=>{var i;class n{constructor(t,o,l,r){this.teamService=t,this.messageService=o,this.authService=l,this.modeService=r,this.teamDialog=!1,this.deleteTeamDialog=!1,this.deleteTeamsDialog=!1,this.selectedTeams=[],this.submitted=!1,this.cols=[],this.statuses=[],this.rowsPerPageOptions=[5,10,20],this.cols=[{field:"team",header:"Times"}]}ngOnInit(){this.loadLoggedInUser(),this.loadTeams(),this.initModes()}initModes(){this.modeService.getAll().subscribe(t=>this.modes=t)}loadLoggedInUser(){this.myUser=this.authService.getUser().subscribe(t=>{this.loggedInUser=t})}loadTeams(){this.teamService.loadTeamsUser(this.loggedInUser.id).subscribe({next:t=>{this.teams=t}})}activeTeam(t){this.teamService.activeTeam(t.id).subscribe({next:o=>{const l=this.teams.findIndex(r=>r.id===o.id);-1!==l&&(this.teams[l]=o),this.messageService.add({severity:"success",summary:"Sucesso",detail:`Time ${o.team} alterado com sucesso!`})},error:o=>{console.error("Erro ao ativar o time:",o)}})}editTeam(t){this.team=t,this.teamDialog=!0}deleteTeam(t){this.deleteTeamDialog=!0,this.team=t}deleteTeams(){this.deleteTeamsDialog=!0}hideDialog(){this.teamDialog=!1}confirmDelete(){if(this.team){this.deleteSingle(this.team);const t=this.teams.findIndex(o=>o.id===this.team.id);-1!==t&&this.teams.splice(t,1)}}deleteTeamsSelecteds(){this.selectedTeams.forEach(t=>{this.deleteSingle(t)}),this.teams=this.teams.filter(t=>!this.selectedTeams.includes(t)),this.selectedTeams=[],this.deleteTeamsDialog=!1}deleteSingle(t){this.teamService.delete(t.id).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Successful",detail:"Time deletado",life:3e3}),this.deleteTeamDialog=!1},error:o=>{console.error("Erro ao excluir o time:",o)}})}activeTeams(){this.selectedTeams.forEach(t=>{t.check||this.activeTeam(t)}),this.selectedTeams=[]}desactiveTeams(){this.selectedTeams.forEach(t=>{t.check&&this.activeTeam(t)}),this.selectedTeams=[]}onGlobalFilter(t,o){t.filterGlobal(o.target.value,"contains")}saveTeam(){this.team.mode.id&&(this.team.mode_id=this.team.mode.id),this.teamService.update(this.team).subscribe({next:t=>{this.messageService.add({severity:"success",summary:"Successful",detail:"Time salvo",life:3e3}),this.teamDialog=!1,this.team=new _,this.submitted=!0},error:t=>{console.error("Erro ao cadastrar:",t),this.messageService.add({key:"tst",severity:"error",summary:"Falhou!",detail:`Erro! ${t.error.error}`})}})}}return(i=n).\u0275fac=function(t){return new(t||i)(e.Y36(C.U),e.Y36(d.ez),e.Y36(m.u),e.Y36(T.d))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-myteam-list"]],decls:25,vars:27,consts:[[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],["styleClass","mb-4"],["pTemplate","left"],["responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","selectionMode","multiple","dataKey","id",3,"value","columns","rows","globalFilterFields","paginator","rowsPerPageOptions","showCurrentPageReport","selection","rowHover","selectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["header","Time Details",1,"p-fluid",3,"visible","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["header","Confirm",3,"visible","modal","visibleChange"],[1,"flex","align-items-center","justify-content-center"],[1,"pi","pi-exclamation-triangle","mr-3",2,"font-size","2rem"],[4,"ngIf"],[1,"my-2"],["pButton","","pRipple","","label","Delete","icon","pi pi-trash",1,"p-button-danger","mr-2",3,"disabled","click"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",1,"w-full","sm:w-auto",3,"input"],[2,"width","3rem"],["pSortableColumn","id"],["field","id"],["pSortableColumn","team"],["field","name"],["pSortableColumn","mode"],[3,"value"],[2,"width","14%","min-width","10rem"],[1,"p-column-title"],[2,"width","40%","min-width","10rem"],[2,"width","20%","min-width","10rem"],[1,"flex"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-success","mr-1",3,"disabled","click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-danger","mr-1",3,"click"],[1,"field"],["for","name"],["type","text","pInputText","","id","team","required","","autofocus","",3,"ngModel","ngClass","ngModelChange"],["class","ng-dirty ng-invalid",4,"ngIf"],["for","status"],["optionLabel","name",3,"options","ngModel","ngModelChange"],[1,"ng-dirty","ng-invalid"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"disabled","click"],["pButton","","pRipple","","icon","pi pi-times","label","No",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Yes",1,"p-button-text",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"p-toast"),e.TgZ(4,"p-toolbar",3),e.YNc(5,N,2,1,"ng-template",4),e.qZA(),e.TgZ(6,"p-table",5,6),e.NdJ("selectionChange",function(r){return o.selectedTeams=r}),e.YNc(8,D,6,0,"ng-template",7),e.YNc(9,q,16,0,"ng-template",8),e.YNc(10,w,21,5,"ng-template",9),e.qZA()(),e.TgZ(11,"p-dialog",10),e.NdJ("visibleChange",function(r){return o.teamDialog=r}),e.YNc(12,E,9,7,"ng-template",11),e.YNc(13,Y,2,1,"ng-template",12),e.qZA(),e.TgZ(14,"p-dialog",13),e.NdJ("visibleChange",function(r){return o.deleteTeamDialog=r}),e.TgZ(15,"div",14),e._UZ(16,"i",15),e.YNc(17,$,5,1,"span",16),e.qZA(),e.YNc(18,G,2,0,"ng-template",12),e.qZA(),e.TgZ(19,"p-dialog",13),e.NdJ("visibleChange",function(r){return o.deleteTeamsDialog=r}),e.TgZ(20,"div",14),e._UZ(21,"i",15),e.TgZ(22,"span"),e._uU(23,"Tem certeza que qur excluir estes times?"),e.qZA()(),e.YNc(24,H,2,0,"ng-template",12),e.qZA()()()),2&t&&(e.xp6(6),e.Q6J("value",o.teams)("columns",o.cols)("rows",10)("globalFilterFields",e.DdM(22,K))("paginator",!0)("rowsPerPageOptions",e.DdM(23,j))("showCurrentPageReport",!0)("selection",o.selectedTeams)("rowHover",!0),e.xp6(5),e.Akn(e.DdM(24,Q)),e.Q6J("visible",o.teamDialog)("modal",!0),e.xp6(3),e.Akn(e.DdM(25,U)),e.Q6J("visible",o.deleteTeamDialog)("modal",!0),e.xp6(3),e.Q6J("ngIf",o.team),e.xp6(2),e.Akn(e.DdM(26,U)),e.Q6J("visible",o.deleteTeamsDialog)("modal",!0))},dependencies:[u.mk,u.O5,c.Fj,c.JJ,c.Q7,c.On,v.FN,d.jx,Z.o,b.Lt,f.Hq,p.iA,p.lQ,p.fz,p.UA,p.Mo,M.o,y.V]}),n})()}];let B=(()=>{var i;class n{}return(i=n).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[g.Bz.forChild(R),g.Bz]}),n})();var P=a(9862),O=a(1712);let z=(()=>{var i;class n{}return(i=n).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[d.ez],imports:[u.ez,B,P.JF,c.u5,v.EV,x.d,Z.j,b.kW,c.UX,f.hJ,p.U$,O.U,f.hJ,M.V,y.S]}),n})()},8443:(A,h,a)=>{a.d(h,{U:()=>_});var u=a(553),g=a(4946),c=a(9862);let _=(()=>{var e;class d{constructor(m){this.http=m,this.apiUrl=u.N.baseUrl}save(m){return this.http.post(`${this.apiUrl}teams`,m)}loadTeams(){return this.http.get(`${this.apiUrl}teams`)}loadTeamsUser(m){return this.http.get(`${this.apiUrl}teams/user/${m}`)}loadTeamsUserChecked(m){return this.http.get(`${this.apiUrl}teams/user/checked/${m}`)}activeTeam(m){return this.http.patch(`${this.apiUrl}teams/check/${m}`,{})}delete(m){return this.http.delete(`${this.apiUrl}teams/${m}`)}update(m){return this.http.put(`${this.apiUrl}teams/${m.id}`,m)}searchById(m){return this.http.get(`${this.apiUrl}teams/${m}`)}}return(e=d).\u0275fac=function(m){return new(m||e)(g.LFG(c.eN))},e.\u0275prov=g.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),d})()}}]);